---
title: "스프링부트와 AWS로 혼자 구현하는 웹 서비스 5"
categories: Springboot AWS WEB book
date: 2020-10-26
last_modified_at: 2020-10-27
---



<br/><br/><br/>


# 5장 스프링 시큐리티와 OAuth 2.0으로 로그인 기능 구현하기
<br/>

## 현재 배우고 있는 전체 코드는 [이곳](https://github.com/wonjuYang/spb_aws_book) 에서 확인 가능합니다.


### 꼭 기억해야 할 것
__마스테치의 파일 위치는 기본적으로 src/main/resources/templates에 생성__ <br/>
__페이지 로딩속도를 높이기 위해 css header에 js는 footer에 두는게 맞다 (head가 실행되고서야 body가 실행되므로)__<br/>
__이미 알고 있지만 CREATE->POST, READ->GET, UPDATE->PUT, DELETE->DELETE__<br/>




<br/><br/>

## 1. 스프링 시큐리티와 스프링 시큐리티 Oauth2 클라리언트
<br/><br/>

- 스프링시큐리티는 막강한 인증과 인가 기능을 가진 프레임워크 
- 스프링 기반의 애플리케이션에서는 보안을 위한 표준

<br/>

### 스프링부트 1.5 vs 스프링 부트 2.0
<br/><br/>

- 스프링 부트 1.5에서 OAuth2 연동 방법이 2.0에서는 크게 변경됐으나 spring-security-oauth2-autoconfigure이라는 라이브라리 때문에 1.5에서 쓰던 설정을 그대로 쓸수 있음. <br/>
- ㄱ그러나 이 프로젝트에서는 신규 기능 지원, 스프링부트용 라이브러리의 출시 등으로 spring security oauth2 client 라이브러리를 사용해서 진행<br/>
   <br/><br/>


## 2. 구글 서비스 등록
<br/>

- 구글 서비스에 신규 서비스를 생성
- [구글 클라우드 플랫폼](https://console.cloud.google.com)으로 이동 <br/>
1. 신규 프로젝트 선택 -> 새 프로젝트 버튼 클릭 -> 등록될 서비스의 이름 입력 -> 프로젝트 생성
2. 생성이 완료된 프로젝트 선택 -> 왼쪽 메뉴 탭을 클릭해 API 및 서비스 클릭
3. 다시 왼쪽 메뉴에서 사용자 인증 정보 클릭 -> 사용자 인증 정보 만들기 클릭 -> OAuth 클라이언트 ID 클릭
4. 사용자 인증 정보를 만들기 전 동의 화면 생성이 필요함. 따라서 애플리케이션 이름을 적고 email, profile, openid가 있는 것을 확인한 후 저장
5. 동의 화면이 생성됐으면 다시 사용자 인증 정보 만들기 클릭 -> OAuth 클라이언트 ID 클릭
6. 애플리케이션 유형(웹 어플리케이션)과 이름을 등록
7. 승인된 리디렉션 URI 입력 
8. 생성 버튼 클릭

<br/><br/>

- 위의 과정으로 사용자 인증 정보를 만들면 OAuth2.0 클라이언트 ID에 클라이언트 ID와 클라이언트 보안 비밀 코드가 생성된 것을 확인할 수 있음<br/><br/>

- application-oauth 등록을 위해 src/main/resouces 디렉토리에 application-oauth.properties 파일을 생성


```java
spring.security.oauth2.client.registration.google.client-id= 클라이언트 ID
spring.security.oauth2.client.registration.google.client-secret= 클라이언트 보안 비밀 코드
spring.security.oauth2.client.registration.google.scope=profile,email
```

<br/>

- application.properties에 다음 코드 추가

```java
spring.profiles.include=oauth
```

<br/><br/>

- 내 인증 코드가 깃허브에 올라가는 것을 방지하기 위해 .gitignore에 application-oauth.properties 추가
- git에 push해도 application-oauth.properties가 없는 것 확인


<br/><br/><br/>

## 3. 구글 로그인 연동하기



